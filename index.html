<!DOCTYPE html>

<head>
    <title>Hoquei</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- View Port -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS -->
    <link rel="stylesheet" href="/styles/global.css">
    <link rel="stylesheet" href="/styles/modal.css">

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- SCRIPTS -->
    <script src="/scripts/main.js" defer type="module"></script>
    <script src="/scripts/modal.js" defer type="module"></script>
</head>

<body>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/scripts/main.js"></script>
    <script>
        var socket = io();
    </script>
    <div id="index" class="content">
        <main>
            <div class ="content-wrapper">
                <div class="timer">
                    <h1 id="timer-display">0:00</h1>
                </div>
                <div class="score-board">
                    <div class="player">
                        <h1 id=player1></h2>
                        <div class ="score"> 0 </div>
                    </div>
                    <div class="player">
                        <h1 id=player2></h2>
                        <div class ="score"> 0 </div>
                    </div>
                </div>
            </div>

            <canvas width="600" height="400"></canvas>
            <script>
                var widght = document.querySelector("canvas").width;
                var height = document.querySelector("canvas").height;
                var UP = 38, DOWN = 40, LEFT = 37, RIGHT = 39;
                var moveEsquerda = false, moveDireita = false, moveCima = false, moveBaixo = false;
                var cnv = document.querySelector("canvas");
                var ctx = cnv.getContext("2d");
                var p1 = {
                    x: 10,
                    y: 10
                };
                console.log(widght);
                
                update();

                window.addEventListener("keydown", keydownHandler);
                window.addEventListener("keyup", keyupHandler);

                function keydownHandler(e){
                    var key = e.keyCode;
                    if(key === LEFT && key !== RIGHT) moveEsquerda = true;
                    if(key === RIGHT && key !== LEFT) moveDireita = true;
                    if(key === UP && key !== DOWN) moveCima = true;
                    if(key === DOWN && key !== UP) moveBaixo = true;
                    console.log(p1.x);
                    console.log(p1.y);
                    render();
                }
                
                function keyupHandler(e){
                    var key = e.keyCode;
                    if(key === LEFT && key !== RIGHT) moveEsquerda = false;
                    if(key === RIGHT && key !== LEFT) moveDireita = false;
                    if(key === UP && key !== DOWN) moveCima = false;
                    if(key === DOWN && key !== UP) moveBaixo = false;
                    
                    render();
                }

                function move(){
                    if(moveEsquerda && p1.x > 0) p1.x--;
                    if(moveDireita && p1.x < widght-100) p1.x++;
                    if(moveCima && p1.y > 0) p1.y--;
                    if(moveBaixo && p1.y < height-100) p1.y++;
                }

                function render(){
                    ctx.clearRect(0,0,cnv.width,cnv.height);
                    ctx.fillRect(p1.x, p1.y, 50, 50)
                }

                function update(){
                    requestAnimationFrame(update, cnv);
                    move();
                    render();
                }
            </script>

            <section id="table">
                <div class="detail">
                    <div class="main-circle">
                        <a class="inner-circle" id="test"></a>
                    </div>
                    <div class="red-circles">
                        <a class="circle">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </a>
                        <a class="circle">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </a>
                        <a class="circle">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </a>
                        <a class="circle">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </a>
                    </div>
                    <a class="line"></a>
                    <a class="points">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                    </a>
                    <a class="goals">
                        <div></div>
                        <div></div>
                    </a>
                </div>
            </section>
        </main>
    </div>

    <!-- MODAL -->
    <div class="modal-wrapper">
        <div class="modal">
            <h2 id='BemVindo'></h2>
            <p id='waiting'></p>
            <p id='play'></p>
            <p id='playerWaiting'></p>
        </div>
    </div>
</body>

